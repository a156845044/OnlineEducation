{"Date":"2017-05-10 21:40:42","LogLevel":"异常","LogType":"SQL执行","Message":"违反了 PRIMARY KEY 约束 \u0027PK_Mod_Online_School\u0027。不能在对象 \u0027dbo.Mod_Online_School\u0027 中插入重复键。\r\n语句已终止。","CmdText":"INSERT INTO Mod_Online_School(SchoolId,SchoolName,SchoolType,StateFlag,OrderIndex,DeleteFlag,ExtFlag) VALUES(@P00,@P01,@P02,@P03,@P04,@P05,@P06)","Parameters":[{"ParameterName":"@P00","Size":"32","Value":"11c962ea38164bffb62f16dada0d91c3","DbType":"String"},{"ParameterName":"@P01","Size":"6","Value":"南京工业大学","DbType":"String"},{"ParameterName":"@P02","Size":"0","Value":"0","DbType":"Int32"},{"ParameterName":"@P03","Size":"0","Value":"0","DbType":"Int32"},{"ParameterName":"@P04","Size":"0","Value":"0","DbType":"Int32"},{"ParameterName":"@P05","Size":"0","Value":"0","DbType":"Int32"},{"ParameterName":"@P06","Size":"0","Value":"0","DbType":"Int32"}]},{"Date":"2017-05-10 21:56:27","LogLevel":"异常","LogType":"SQL执行","Message":"关键字 \u0027AND\u0027 附近有语法错误。","CmdText":"SELECT COUNT(*) FROM( SELECT  TOP 100 PERCENT * FROM Mod_Online_YearPlan   AND   YearId =2016  ORDER BY  YearId DESC )PT","Parameters":[]},{"Date":"2018-06-10 15:33:57","LogLevel":"异常","LogType":"SQL执行","Message":"关键字 \u0027WHERE\u0027 附近有语法错误。\r\n关键字 \u0027WHERE\u0027 附近有语法错误。\r\n关键字 \u0027WHERE\u0027 附近有语法错误。\r\n“)”附近有语法错误。","CmdText":"SELECT COUNT(*) FROM( SELECT  TOP 100 PERCENT MOYD.*,  (SELECT TOP 1 child.CastScore FROM Mod_Online_YearPlan_Detail child INNER JOIN [Mod_Online_YearPlan] childPlan WHERE child.YearId=2017 and childPlan.[ExtFlag]=0  AND child.SchoolId =MOYD.SchoolId AND child.SchoolMajorId =MOYD.SchoolMajorId  AND child.AppTypeId =MOYD.AppTypeId )  AS LastYearScore, (SELECT TOP 1 child.CastScore FROM Mod_Online_YearPlan_Detail child INNER JOIN [Mod_Online_YearPlan] childPlan WHERE child.YearId=2016 and childPlan.[ExtFlag]=0  AND child.SchoolId =MOYD.SchoolId AND child.SchoolMajorId =MOYD.SchoolMajorId  AND child.AppTypeId =MOYD.AppTypeId )  AS TwoYearsAgoScore, (SELECT TOP 1 child.CastScore FROM Mod_Online_YearPlan_Detail child INNER JOIN [Mod_Online_YearPlan] childPlan WHERE child.YearId=2015 and childPlan.[ExtFlag]=0  AND child.SchoolId =MOYD.SchoolId AND child.SchoolMajorId =MOYD.SchoolMajorId  AND child.AppTypeId =MOYD.AppTypeId )  AS ThreeYearsAgoScore  FROM Mod_Online_YearPlan_Detail MOYD  INNER JOIN [dbo].[Mod_Online_YearPlan] MOY ON MOY.[PlanId]=MOYD.PlanId  WHERE  MOYD.PlanId=@P00  AND MOYD.AppTypeId=@P01  AND MOY.[ExtFlag]=@P02  AND MOYD.DetailId IN (SELECT MOYPDMC.DetailId FROM Mod_Online_YearPlan_Detail_MajorCode MOYPDMC WHERE MOYPDMC.PlanId = MOYD.PlanId AND  MOYPDMC.CodeId LIKE (\u0027%\u0027) )  ORDER BY MOYD.SchoolId  )PT","Parameters":[{"ParameterName":"@P00","Size":"32","Value":"89174cae1fdc49b4b98d5887d8b8e6bb","DbType":"String"},{"ParameterName":"@P01","Size":"0","Value":"","DbType":"String"},{"ParameterName":"@P02","Size":"0","Value":"0","DbType":"Int32"}]},{"Date":"2018-06-10 15:39:35","LogLevel":"异常","LogType":"SQL执行","Message":"转换 varchar 值 \u0027201705222227029353826\u0027 时溢出了整数列。","CmdText":"SELECT * FROM (SELECT ROW_NUMBER() OVER(ORDER BY (SELECT 1)) RN,PT1.* FROM( SELECT  TOP 10000 MOYD.*,  (SELECT TOP 1 child.CastScore FROM Mod_Online_YearPlan_Detail child INNER JOIN [Mod_Online_YearPlan] childPlan ON childPlan.YearId=child.PlanId WHERE child.YearId=2016 and childPlan.[ExtFlag]=0  AND child.SchoolId =MOYD.SchoolId AND child.SchoolMajorId =MOYD.SchoolMajorId  AND child.AppTypeId =MOYD.AppTypeId )  AS LastYearScore, (SELECT TOP 1 child.CastScore FROM Mod_Online_YearPlan_Detail child INNER JOIN [Mod_Online_YearPlan] childPlan ON childPlan.YearId=child.PlanId WHERE child.YearId=2015 and childPlan.[ExtFlag]=0  AND child.SchoolId =MOYD.SchoolId AND child.SchoolMajorId =MOYD.SchoolMajorId  AND child.AppTypeId =MOYD.AppTypeId )  AS TwoYearsAgoScore, (SELECT TOP 1 child.CastScore FROM Mod_Online_YearPlan_Detail child INNER JOIN [Mod_Online_YearPlan] childPlan ON childPlan.YearId=child.PlanId WHERE child.YearId=2014 and childPlan.[ExtFlag]=0  AND child.SchoolId =MOYD.SchoolId AND child.SchoolMajorId =MOYD.SchoolMajorId  AND child.AppTypeId =MOYD.AppTypeId )  AS ThreeYearsAgoScore  FROM Mod_Online_YearPlan_Detail MOYD  INNER JOIN [dbo].[Mod_Online_YearPlan] MOY ON MOY.[PlanId]=MOYD.PlanId  WHERE  MOYD.PlanId=@P00  AND MOYD.AppTypeId=@P01  AND MOY.[ExtFlag]=@P02  AND MOYD.DetailId IN (SELECT MOYPDMC.DetailId FROM Mod_Online_YearPlan_Detail_MajorCode MOYPDMC WHERE MOYPDMC.PlanId = MOYD.PlanId AND  MOYPDMC.CodeId LIKE (\u00276202%\u0027) )  ORDER BY MOYD.SchoolId  )PT1)PT2 WHERE PT2.RN BETWEEN 1 AND 10","Parameters":[{"ParameterName":"@P00","Size":"21","Value":"201705222226482860001","DbType":"String"},{"ParameterName":"@P01","Size":"21","Value":"201705212332234510001","DbType":"String"},{"ParameterName":"@P02","Size":"0","Value":"0","DbType":"Int32"}]}